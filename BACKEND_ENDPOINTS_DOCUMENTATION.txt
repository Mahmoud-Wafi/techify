================================================================================
                    TEACHIFY PROJECT - BACKEND API ENDPOINTS
                           Complete Documentation
================================================================================

PROJECT: Teachify (Educational Platform)
BACKEND: Django REST Framework (DRF)
VERSION: 1.0
LAST UPDATED: 2026-01-05

================================================================================
                              TABLE OF CONTENTS
================================================================================

1. AUTHENTICATION & ACCOUNTS (api/accounts/)
2. COURSES, LESSONS & CATEGORIES (api/courses/)
3. EXAMS, QUESTIONS & CERTIFICATES (api/)
4. NOTIFICATIONS (api/)

================================================================================
                    1. AUTHENTICATION & ACCOUNTS (api/accounts/)
================================================================================

ğŸ“ ENDPOINT: POST /api/accounts/register/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: AllowAny (No authentication required)
â”œâ”€ DESCRIPTION: Create a new user account for students, instructors, or admin
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "email": "user@example.com",        [Required] User email address
â”‚    "username": "optional_username",    [Optional] User username
â”‚    "password": "securepassword123",    [Required] User password (validated)
â”‚    "role": "student|instructor|admin", [Required] User role
â”‚    "phone_number": "+1234567890",      [Optional] User phone number
â”‚    "avatar": null                       [Optional] User avatar file
â”‚  }
â”œâ”€ RESPONSE (201 Created):
â”‚  {
â”‚    "id": 1,
â”‚    "email": "user@example.com",
â”‚    "username": "generated_username",
â”‚    "role": "student",
â”‚    "phone_number": "+1234567890",
â”‚    "avatar": null,
â”‚    "is_verified": false
â”‚  }
â”œâ”€ ERROR RESPONSES:
â”‚  400: Bad Request (validation errors)
â”‚      {
â”‚        "email": ["This field may not be blank."],
â”‚        "password": ["Password validation error"]
â”‚      }
â””â”€ NOTES: Password is validated according to Django's password validators

---

ğŸ“ ENDPOINT: POST /api/accounts/login/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: AllowAny (No authentication required)
â”œâ”€ DESCRIPTION: User login - Returns JWT access and refresh tokens + user data
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "email": "user@example.com",       [Required] Email or username
â”‚    "password": "securepassword123"    [Required] Password
â”‚  }
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",     JWT access token
â”‚    "refresh": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",    JWT refresh token
â”‚    "user": {
â”‚      "id": 1,
â”‚      "username": "john_doe",
â”‚      "email": "john@example.com",
â”‚      "role": "student",
â”‚      "phone_number": "+1234567890",
â”‚      "avatar": "http://...",
â”‚      "is_verified": true
â”‚    }
â”‚  }
â”œâ”€ ERROR RESPONSES:
â”‚  401: Unauthorized
â”‚      {
â”‚        "detail": "No active account found with the given credentials"
â”‚      }
â””â”€ NOTES: Tokens are JWT (JSON Web Tokens) with role and email embedded

---

ğŸ“ ENDPOINT: POST /api/accounts/refresh/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: AllowAny
â”œâ”€ DESCRIPTION: Refresh JWT access token using refresh token
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "refresh": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."  [Required] Refresh token
â”‚  }
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."  New JWT access token
â”‚  }
â”œâ”€ ERROR RESPONSES:
â”‚  401: Unauthorized
â”‚      {
â”‚        "detail": "Token is invalid or expired"
â”‚      }
â””â”€ NOTES: Called by frontend to refresh token when access token expires

---

ğŸ“ ENDPOINT: GET /api/accounts/me/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsAuthenticated (Login required)
â”œâ”€ DESCRIPTION: Retrieve current logged-in user's complete profile data
â”œâ”€ REQUEST HEADERS:
â”‚  Authorization: Bearer <access_token>
â”œâ”€ REQUEST BODY: None
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "id": 1,
â”‚    "username": "john_doe",
â”‚    "email": "john@example.com",
â”‚    "role": "student",
â”‚    "phone_number": "+1234567890",
â”‚    "avatar": "http://example.com/media/avatars/john.jpg",
â”‚    "is_verified": true
â”‚  }
â”œâ”€ ERROR RESPONSES:
â”‚  401: Unauthorized (Missing or invalid token)
â””â”€ NOTES: Returns user's own profile data

---

ğŸ“ ENDPOINT: GET /api/token/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: AllowAny
â”œâ”€ DESCRIPTION: Alternative JWT token obtain endpoint
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "email": "user@example.com",
â”‚    "password": "password123"
â”‚  }
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "access": "...",
â”‚    "refresh": "...",
â”‚    "role": "student",
â”‚    "email": "user@example.com"
â”‚  }
â””â”€ NOTES: Similar to /login/ endpoint

---

ğŸ“ ENDPOINT: POST /api/token/refresh/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: AllowAny
â”œâ”€ DESCRIPTION: Refresh JWT token endpoint
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "refresh": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
â”‚  }
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
â”‚  }
â””â”€ NOTES: Alternative refresh endpoint

================================================================================
                    2. COURSES, LESSONS & CATEGORIES (api/courses/)
================================================================================

ğŸ“ ENDPOINT: GET /api/courses/courses/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: AllowAny
â”œâ”€ DESCRIPTION: Get list of all courses with pagination
â”œâ”€ QUERY PARAMETERS:
â”‚  - page: Integer (pagination page number)
â”‚  - search: String (search courses by title/description)
â”œâ”€ REQUEST BODY: None
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "count": 50,
â”‚    "next": "http://api.example.com/api/courses/courses/?page=2",
â”‚    "previous": null,
â”‚    "results": [
â”‚      {
â”‚        "id": 1,
â”‚        "instructor": 5,
â”‚        "title": "Python 101",
â”‚        "description": "Learn Python basics",
â”‚        "category": 1,
â”‚        "category_details": {
â”‚          "id": 1,
â”‚          "name": "Programming",
â”‚          "slug": "programming"
â”‚        },
â”‚        "price": 49.99,
â”‚        "thumbnail": "http://...",
â”‚        "created_at": "2025-01-01T10:00:00Z",
â”‚        "lessons": [
â”‚          {
â”‚            "id": 1,
â”‚            "course": 1,
â”‚            "title": "Lesson 1: Introduction",
â”‚            "description": "Introduction to Python",
â”‚            "video_url": "https://youtube.com/...",
â”‚            "order": 1
â”‚          }
â”‚        ],
â”‚        "is_enrolled": false
â”‚      }
â”‚    ]
â”‚  }
â”œâ”€ ERROR RESPONSES:
â”‚  400: Bad Request (invalid query parameters)
â””â”€ NOTES: Anyone can view course listings

---

ğŸ“ ENDPOINT: POST /api/courses/courses/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Create a new course (Instructor only)
â”œâ”€ REQUEST HEADERS:
â”‚  Authorization: Bearer <access_token>
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "title": "Advanced Python",                    [Required] Course title
â”‚    "description": "Advanced Python concepts",     [Required] Course description
â”‚    "category": 1,                                [Required] Category ID
â”‚    "price": 99.99,                               [Required] Course price
â”‚    "thumbnail": <file>,                          [Optional] Course thumbnail image
â”‚  }
â”œâ”€ RESPONSE (201 Created):
â”‚  {
â”‚    "id": 51,
â”‚    "instructor": 5,
â”‚    "title": "Advanced Python",
â”‚    "description": "Advanced Python concepts",
â”‚    "category": 1,
â”‚    "category_details": {...},
â”‚    "price": 99.99,
â”‚    "thumbnail": "http://...",
â”‚    "created_at": "2026-01-05T10:00:00Z",
â”‚    "lessons": [],
â”‚    "is_enrolled": false
â”‚  }
â”œâ”€ ERROR RESPONSES:
â”‚  401: Unauthorized (Not authenticated)
â”‚  403: Forbidden (Not an instructor)
â”‚  400: Bad Request (Missing required fields)
â””â”€ NOTES: Automatically sets instructor to current user

---

ğŸ“ ENDPOINT: GET /api/courses/courses/{id}/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: AllowAny
â”œâ”€ DESCRIPTION: Get detailed course information by ID
â”œâ”€ REQUEST BODY: None
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "id": 1,
â”‚    "instructor": 5,
â”‚    "title": "Python 101",
â”‚    "description": "Learn Python basics",
â”‚    "category": 1,
â”‚    "category_details": {...},
â”‚    "price": 49.99,
â”‚    "thumbnail": "http://...",
â”‚    "created_at": "2025-01-01T10:00:00Z",
â”‚    "lessons": [...],
â”‚    "is_enrolled": true|false
â”‚  }
â”œâ”€ ERROR RESPONSES:
â”‚  404: Not Found (Course doesn't exist)
â””â”€ NOTES: is_enrolled field shows if current user is enrolled

---

ğŸ“ ENDPOINT: PUT /api/courses/courses/{id}/
â”œâ”€ METHOD: PUT
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Update an entire course (Instructor only)
â”œâ”€ REQUEST HEADERS:
â”‚  Authorization: Bearer <access_token>
â”œâ”€ REQUEST BODY: (all fields required)
â”‚  {
â”‚    "title": "Updated Title",
â”‚    "description": "Updated description",
â”‚    "category": 1,
â”‚    "price": 99.99,
â”‚    "thumbnail": <file>
â”‚  }
â”œâ”€ RESPONSE (200 OK): Updated course object
â”œâ”€ ERROR RESPONSES:
â”‚  401/403/404: See above
â””â”€ NOTES: Only instructor who created the course can update

---

ğŸ“ ENDPOINT: PATCH /api/courses/courses/{id}/
â”œâ”€ METHOD: PATCH
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Partially update a course
â”œâ”€ REQUEST BODY: (any fields can be updated)
â”‚  {
â”‚    "title": "New Title"
â”‚  }
â”œâ”€ RESPONSE (200 OK): Updated course object
â””â”€ NOTES: Partial update - only changed fields needed

---

ğŸ“ ENDPOINT: DELETE /api/courses/courses/{id}/
â”œâ”€ METHOD: DELETE
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Delete a course
â”œâ”€ RESPONSE (204 No Content): Empty response on success
â”œâ”€ ERROR RESPONSES:
â”‚  401/403/404: See above
â””â”€ NOTES: Deletes course and all associated lessons

---

ğŸ“ ENDPOINT: GET /api/courses/lessons/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: AllowAny
â”œâ”€ DESCRIPTION: Get all lessons with pagination
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "count": 100,
â”‚    "next": "...",
â”‚    "previous": null,
â”‚    "results": [
â”‚      {
â”‚        "id": 1,
â”‚        "course": 1,
â”‚        "title": "Lesson 1: Introduction",
â”‚        "description": "Introduction content",
â”‚        "video_url": "https://youtube.com/...",
â”‚        "order": 1
â”‚      }
â”‚    ]
â”‚  }
â””â”€ NOTES: Lists all lessons from all courses

---

ğŸ“ ENDPOINT: POST /api/courses/lessons/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Create a new lesson in a course
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "course": 1,                      [Required] Course ID
â”‚    "title": "New Lesson",           [Required] Lesson title
â”‚    "description": "Lesson content",  [Required] Lesson description
â”‚    "video_url": "https://...",       [Required] Video URL
â”‚    "order": 2                        [Required] Lesson order in course
â”‚  }
â”œâ”€ RESPONSE (201 Created): Lesson object
â””â”€ NOTES: Only instructor of the course can create lessons

---

ğŸ“ ENDPOINT: GET /api/courses/lessons/{id}/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: AllowAny
â”œâ”€ DESCRIPTION: Get specific lesson details
â”œâ”€ RESPONSE (200 OK): Lesson object
â””â”€ NOTES: Returns lesson content and video URL

---

ğŸ“ ENDPOINT: PUT /api/courses/lessons/{id}/
â”œâ”€ METHOD: PUT
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Update entire lesson
â”œâ”€ REQUEST BODY: (all fields required)
â”‚  {
â”‚    "course": 1,
â”‚    "title": "Updated Title",
â”‚    "description": "Updated content",
â”‚    "video_url": "https://...",
â”‚    "order": 2
â”‚  }
â”œâ”€ RESPONSE (200 OK): Updated lesson object
â””â”€ NOTES: Full update required

---

ğŸ“ ENDPOINT: PATCH /api/courses/lessons/{id}/
â”œâ”€ METHOD: PATCH
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Partially update lesson
â”œâ”€ REQUEST BODY: (any fields)
â”‚  {
â”‚    "title": "New Title"
â”‚  }
â”œâ”€ RESPONSE (200 OK): Updated lesson object
â””â”€ NOTES: Partial update

---

ğŸ“ ENDPOINT: DELETE /api/courses/lessons/{id}/
â”œâ”€ METHOD: DELETE
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Delete a lesson
â”œâ”€ RESPONSE (204 No Content)
â””â”€ NOTES: Deletes the lesson and its associated data

---

ğŸ“ ENDPOINT: GET /api/courses/categories/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: AllowAny
â”œâ”€ DESCRIPTION: Get all course categories
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "count": 10,
â”‚    "next": null,
â”‚    "previous": null,
â”‚    "results": [
â”‚      {
â”‚        "id": 1,
â”‚        "name": "Programming",
â”‚        "slug": "programming"
â”‚      },
â”‚      {
â”‚        "id": 2,
â”‚        "name": "Design",
â”‚        "slug": "design"
â”‚      }
â”‚    ]
â”‚  }
â””â”€ NOTES: Categories are read-only for students

---

ğŸ“ ENDPOINT: GET /api/courses/categories/{id}/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: AllowAny
â”œâ”€ DESCRIPTION: Get specific category details
â”œâ”€ RESPONSE (200 OK): Category object
â””â”€ NOTES: Returns single category

---

ğŸ“ ENDPOINT: GET /api/courses/enrollments/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Get all student enrollments in instructor's courses
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "count": 25,
â”‚    "results": [
â”‚      {
â”‚        "id": 1,
â”‚        "student": 10,
â”‚        "student_email": "student@example.com",
â”‚        "course": 1,
â”‚        "course_title": "Python 101",
â”‚        "enrolled_at": "2025-12-20T15:30:00Z"
â”‚      }
â”‚    ]
â”‚  }
â””â”€ NOTES: Only instructors can see enrollments

---

ğŸ“ ENDPOINT: POST /api/courses/enrollments/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Create/register a student enrollment
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "student": 10,        [Required] Student user ID
â”‚    "course": 1           [Required] Course ID
â”‚  }
â”œâ”€ RESPONSE (201 Created): Enrollment object
â””â”€ NOTES: Instructor manages student enrollments

---

ğŸ“ ENDPOINT: GET /api/courses/progress/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsStudent
â”œâ”€ DESCRIPTION: Get student's lesson progress
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "count": 5,
â”‚    "results": [
â”‚      {
â”‚        "id": 1,
â”‚        "lesson": 1,
â”‚        "lesson_title": "Lesson 1: Introduction",
â”‚        "student": 10,
â”‚        "is_completed": true,
â”‚        "completed_at": "2025-12-25T10:00:00Z",
â”‚        "progress_percent": 100
â”‚      }
â”‚    ]
â”‚  }
â””â”€ NOTES: Shows student's progress in lessons

---

ğŸ“ ENDPOINT: POST /api/courses/progress/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: IsStudent
â”œâ”€ DESCRIPTION: Create or update lesson progress
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "lesson": 1,              [Required] Lesson ID
â”‚    "is_completed": true,     [Required] Boolean
â”‚    "progress_percent": 100   [Optional] Progress percentage (0-100)
â”‚  }
â”œâ”€ RESPONSE (201 Created): Progress object
â”œâ”€ TRIGGERS: Notifications sent on completing 1, 3, 5, 10 lessons
â””â”€ NOTES: Triggers achievement notifications

---

ğŸ“ ENDPOINT: GET /api/courses/progress/{id}/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsStudent
â”œâ”€ DESCRIPTION: Get specific progress entry
â”œâ”€ RESPONSE (200 OK): Progress object
â””â”€ NOTES: Student can only see own progress

---

ğŸ“ ENDPOINT: PUT /api/courses/progress/{id}/
â”œâ”€ METHOD: PUT
â”œâ”€ PERMISSION: IsStudent
â”œâ”€ DESCRIPTION: Update entire progress entry
â”œâ”€ REQUEST BODY: (all fields required)
â”‚  {
â”‚    "lesson": 1,
â”‚    "is_completed": true,
â”‚    "progress_percent": 100
â”‚  }
â”œâ”€ RESPONSE (200 OK): Updated progress object
â””â”€ NOTES: Full update

---

ğŸ“ ENDPOINT: DELETE /api/courses/progress/{id}/
â”œâ”€ METHOD: DELETE
â”œâ”€ PERMISSION: IsStudent
â”œâ”€ DESCRIPTION: Delete a progress entry
â”œâ”€ RESPONSE (204 No Content)
â””â”€ NOTES: Rarely used - allows resetting progress

---

ğŸ“ ENDPOINT: GET /api/courses/wishlist/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsStudent
â”œâ”€ DESCRIPTION: Get student's wishlist (favorite courses)
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "count": 3,
â”‚    "results": [
â”‚      {
â”‚        "id": 1,
â”‚        "student": 10,
â”‚        "course": 5,
â”‚        "course_title": "Advanced Python",
â”‚        "course_thumbnail": "http://...",
â”‚        "created_at": "2025-12-20T10:00:00Z"
â”‚      }
â”‚    ]
â”‚  }
â””â”€ NOTES: Student's wishlist items

---

ğŸ“ ENDPOINT: POST /api/courses/wishlist/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: IsStudent
â”œâ”€ DESCRIPTION: Add course to wishlist
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "course": 1  [Required] Course ID to add to wishlist
â”‚  }
â”œâ”€ RESPONSE (201 Created): Wishlist item object
â””â”€ NOTES: Automatically sets student to current user

---

ğŸ“ ENDPOINT: DELETE /api/courses/wishlist/{id}/
â”œâ”€ METHOD: DELETE
â”œâ”€ PERMISSION: IsStudent
â”œâ”€ DESCRIPTION: Remove course from wishlist
â”œâ”€ RESPONSE (204 No Content)
â””â”€ NOTES: Deletes the wishlist item

---

ğŸ“ ENDPOINT: GET /api/courses/dashboard/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsStudent
â”œâ”€ DESCRIPTION: Get student dashboard statistics
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "total_enrolled_courses": 5,
â”‚    "total_completed_lessons": 42,
â”‚    "wishlist_count": 3
â”‚  }
â””â”€ NOTES: Quick overview of student's activity

---

ğŸ“ ENDPOINT: GET /api/courses/instructor/dashboard/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Get instructor dashboard statistics
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "total_courses": 8,
â”‚    "total_students": 245
â”‚  }
â””â”€ NOTES: Overview of instructor's courses and students

---

ğŸ“ ENDPOINT: GET /api/courses/top-students/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Get top 10 students by completed lessons
â”œâ”€ RESPONSE (200 OK):
â”‚  [
â”‚    {
â”‚      "username": "student1",
â”‚      "completed": 45
â”‚    },
â”‚    {
â”‚      "username": "student2",
â”‚      "completed": 38
â”‚    }
â”‚  ]
â””â”€ NOTES: Top performers in student courses

================================================================================
                 3. EXAMS, QUESTIONS & CERTIFICATES (api/)
================================================================================

ğŸ“ ENDPOINT: GET /api/exams/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsAuthenticated
â”œâ”€ DESCRIPTION: Get all exams with pagination
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "count": 20,
â”‚    "results": [
â”‚      {
â”‚        "id": 1,
â”‚        "course": 1,
â”‚        "title": "Python Fundamentals Quiz",
â”‚        "description": "Test your Python knowledge",
â”‚        "duration_minutes": 60,
â”‚        "pass_mark": 50,
â”‚        "created_at": "2025-12-01T10:00:00Z",
â”‚        "questions": [...]
â”‚      }
â”‚    ]
â”‚  }
â””â”€ NOTES: All authenticated users can view exams

---

ğŸ“ ENDPOINT: POST /api/exams/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Create a new exam
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "course": 1,                       [Required] Course ID
â”‚    "title": "Final Exam",            [Required] Exam title
â”‚    "description": "Final assessment", [Required] Exam description
â”‚    "duration_minutes": 120,           [Required] Time limit in minutes
â”‚    "pass_mark": 60                   [Required] Passing score percentage
â”‚  }
â”œâ”€ RESPONSE (201 Created): Exam object with empty questions array
â””â”€ NOTES: Only instructors can create exams

---

ğŸ“ ENDPOINT: GET /api/exams/{id}/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsAuthenticated
â”œâ”€ DESCRIPTION: Get specific exam details
â”œâ”€ RESPONSE (200 OK): Exam object with questions (hidden correct_option)
â””â”€ NOTES: Questions show all options but hide the correct answer

---

ğŸ“ ENDPOINT: PUT /api/exams/{id}/
â”œâ”€ METHOD: PUT
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Update entire exam
â”œâ”€ REQUEST BODY: (all fields required)
â”‚  {
â”‚    "course": 1,
â”‚    "title": "Updated Exam",
â”‚    "description": "Updated description",
â”‚    "duration_minutes": 90,
â”‚    "pass_mark": 50
â”‚  }
â”œâ”€ RESPONSE (200 OK): Updated exam object
â””â”€ NOTES: Full update required

---

ğŸ“ ENDPOINT: PATCH /api/exams/{id}/
â”œâ”€ METHOD: PATCH
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Partially update exam
â”œâ”€ REQUEST BODY: (any fields)
â”‚  {
â”‚    "pass_mark": 70
â”‚  }
â”œâ”€ RESPONSE (200 OK): Updated exam object
â””â”€ NOTES: Partial update

---

ğŸ“ ENDPOINT: DELETE /api/exams/{id}/
â”œâ”€ METHOD: DELETE
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Delete an exam
â”œâ”€ RESPONSE (204 No Content)
â””â”€ NOTES: Deletes exam and all associated questions/attempts

---

ğŸ“ ENDPOINT: POST /api/exams/{id}/submit/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: IsStudent
â”œâ”€ DESCRIPTION: Submit exam answers and calculate score
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "answers": [
â”‚      {
â”‚        "question": 1,              [Required] Question ID
â”‚        "selected_option": "A"      [Required] Selected option (A, B, C, D)
â”‚      },
â”‚      {
â”‚        "question": 2,
â”‚        "selected_option": "B"
â”‚      }
â”‚    ]
â”‚  }
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "attempt_id": 5,
â”‚    "score": 85.5,
â”‚    "is_passed": true
â”‚  }
â”œâ”€ LOGIC:
â”‚  - Creates or updates StudentExamAttempt
â”‚  - Calculates score based on correct answers
â”‚  - Generates Certificate if score >= pass_mark
â”‚  - Creates achievement notification
â”œâ”€ SIDE EFFECTS:
â”‚  - StudentAnswer records created
â”‚  - StudentExamAttempt marked as finished
â”‚  - Certificate generated if passed
â””â”€ NOTES: Main endpoint for exam submission

---

ğŸ“ ENDPOINT: GET /api/questions/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsAuthenticated
â”œâ”€ DESCRIPTION: Get all questions (correct_option hidden)
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "count": 100,
â”‚    "results": [
â”‚      {
â”‚        "id": 1,
â”‚        "exam": 1,
â”‚        "question_text": "What is Python?",
â”‚        "option_a": "Programming language",
â”‚        "option_b": "A snake",
â”‚        "option_c": "A library",
â”‚        "option_d": "A framework",
â”‚        "mark": 1
â”‚        [correct_option is NOT shown]
â”‚      }
â”‚    ]
â”‚  }
â””â”€ NOTES: Students cannot see correct answers in list

---

ğŸ“ ENDPOINT: POST /api/questions/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Create a new exam question
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "exam": 1,                    [Required] Exam ID
â”‚    "question_text": "What...",   [Required] Question text
â”‚    "option_a": "Option A",       [Required] Option A text
â”‚    "option_b": "Option B",       [Required] Option B text
â”‚    "option_c": "Option C",       [Required] Option C text
â”‚    "option_d": "Option D",       [Required] Option D text
â”‚    "correct_option": "A",        [Required] Correct answer (A, B, C, D)
â”‚    "mark": 1                     [Required] Points for correct answer
â”‚  }
â”œâ”€ RESPONSE (201 Created): Question object (with correct_option)
â””â”€ NOTES: Only instructors see correct answers

---

ğŸ“ ENDPOINT: GET /api/questions/{id}/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsAuthenticated
â”œâ”€ DESCRIPTION: Get specific question
â”œâ”€ RESPONSE (200 OK): Question object (correct_option hidden for students)
â””â”€ NOTES: Correct answer not shown to students

---

ğŸ“ ENDPOINT: PUT /api/questions/{id}/
â”œâ”€ METHOD: PUT
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Update entire question
â”œâ”€ REQUEST BODY: (all fields required)
â”‚  {
â”‚    "exam": 1,
â”‚    "question_text": "Updated question",
â”‚    "option_a": "...",
â”‚    "option_b": "...",
â”‚    "option_c": "...",
â”‚    "option_d": "...",
â”‚    "correct_option": "C",
â”‚    "mark": 2
â”‚  }
â”œâ”€ RESPONSE (200 OK): Updated question object
â””â”€ NOTES: Full update

---

ğŸ“ ENDPOINT: DELETE /api/questions/{id}/
â”œâ”€ METHOD: DELETE
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Delete a question
â”œâ”€ RESPONSE (204 No Content)
â””â”€ NOTES: Removes question from exam

---

ğŸ“ ENDPOINT: GET /api/attempts/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsAuthenticated
â”œâ”€ DESCRIPTION: Get exam attempts
â”‚  - Students: See only their own attempts
â”‚  - Instructors: See all attempts in their exams
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "count": 25,
â”‚    "results": [
â”‚      {
â”‚        "id": 1,
â”‚        "exam": 1,
â”‚        "student": 10,
â”‚        "score": 85.5,
â”‚        "started_at": "2026-01-05T14:00:00Z",
â”‚        "finished_at": "2026-01-05T15:00:00Z",
â”‚        "is_passed": true,
â”‚        "answers": [...]
â”‚      }
â”‚    ]
â”‚  }
â””â”€ NOTES: ReadOnly - attempts created via /exams/{id}/submit/

---

ğŸ“ ENDPOINT: GET /api/attempts/{id}/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsAuthenticated
â”œâ”€ DESCRIPTION: Get specific exam attempt with all answers
â”œâ”€ RESPONSE (200 OK): Attempt object with StudentAnswer details
â””â”€ NOTES: Shows student's answers and which were correct

---

ğŸ“ ENDPOINT: GET /api/answers/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsAuthenticated
â”œâ”€ DESCRIPTION: Get student answers
â”‚  - Students: Only their own answers
â”‚  - Instructors: All answers in their exams
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "results": [
â”‚      {
â”‚        "id": 1,
â”‚        "attempt": 1,
â”‚        "question": 1,
â”‚        "selected_option": "A",
â”‚        "is_correct": true
â”‚      }
â”‚    ]
â”‚  }
â””â”€ NOTES: List of individual answers

---

ğŸ“ ENDPOINT: POST /api/answers/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: IsStudent
â”œâ”€ DESCRIPTION: Create individual answer (usually via submit endpoint)
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "attempt": 1,             [Required] StudentExamAttempt ID
â”‚    "question": 1,            [Required] Question ID
â”‚    "selected_option": "A"    [Required] Selected option
â”‚  }
â”œâ”€ RESPONSE (201 Created): StudentAnswer object with is_correct flag
â””â”€ NOTES: Normally handled by submit endpoint

---

ğŸ“ ENDPOINT: GET /api/certificates/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsAuthenticated
â”œâ”€ DESCRIPTION: Get certificates
â”‚  - Students: Only their own certificates
â”‚  - Instructors: All certificates from their exams
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "results": [
â”‚      {
â”‚        "id": 1,
â”‚        "attempt": 5,
â”‚        "student": 10,
â”‚        "exam": 1,
â”‚        "certificate_code": "ABC123DEF",
â”‚        "verification_code": "XYZ789KLM",
â”‚        "created_at": "2026-01-05T15:30:00Z"
â”‚      }
â”‚    ]
â”‚  }
â””â”€ NOTES: ReadOnly - auto-generated after passing exam

---

ğŸ“ ENDPOINT: GET /api/certificates/{id}/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsAuthenticated
â”œâ”€ DESCRIPTION: Get specific certificate details
â”œâ”€ RESPONSE (200 OK): Certificate object
â””â”€ NOTES: Contains unique certificate code for verification

================================================================================
                         4. NOTIFICATIONS (api/)
================================================================================

ğŸ“ ENDPOINT: GET /api/notifications/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsAuthenticated
â”œâ”€ DESCRIPTION: Get user's notifications (ordered by newest first)
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "count": 15,
â”‚    "results": [
â”‚      {
â”‚        "id": 1,
â”‚        "user": 10,
â”‚        "user_name": "john_doe",
â”‚        "title": "Ø¥Ù†Ø¬Ø§Ø² Ø¬Ø¯ÙŠØ¯ ğŸ†",
â”‚        "message": "Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª 5 Ø¯Ø±ÙˆØ³ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†. Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªØ£Ù„Ù‚!",
â”‚        "type": "success",
â”‚        "is_read": false,
â”‚        "created_at": "2026-01-05T10:00:00Z"
â”‚      }
â”‚    ]
â”‚  }
â”œâ”€ FILTER:
â”‚  - type: Filter by notification type (success, warning, info, error)
â”‚  - is_read: Filter by read status (true/false)
â””â”€ NOTES: User only sees their own notifications

---

ğŸ“ ENDPOINT: POST /api/notifications/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: IsInstructor
â”œâ”€ DESCRIPTION: Send notification to a student (Instructor only)
â”œâ”€ REQUEST BODY:
â”‚  {
â”‚    "user": 10,                                [Required] Target student user ID
â”‚    "title": "Course Reminder",                [Required] Notification title
â”‚    "message": "Don't forget to complete...", [Required] Message text
â”‚    "type": "info|success|warning|error"     [Required] Notification type
â”‚  }
â”œâ”€ RESPONSE (201 Created):
â”‚  {
â”‚    "id": 50,
â”‚    "user": 10,
â”‚    "user_name": "student_name",
â”‚    "title": "Course Reminder",
â”‚    "message": "...",
â”‚    "type": "info",
â”‚    "is_read": false,
â”‚    "created_at": "2026-01-05T16:00:00Z"
â”‚  }
â”œâ”€ RESTRICTIONS:
â”‚  - Students CANNOT create notifications
â”‚  - Only instructors can send notifications to students
â””â”€ NOTES: Used for course reminders and system messages

---

ğŸ“ ENDPOINT: GET /api/notifications/{id}/
â”œâ”€ METHOD: GET
â”œâ”€ PERMISSION: IsAuthenticated
â”œâ”€ DESCRIPTION: Get specific notification
â”œâ”€ RESPONSE (200 OK): Notification object
â””â”€ NOTES: User must be the recipient

---

ğŸ“ ENDPOINT: POST /api/notifications/{id}/mark_as_read/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: IsAuthenticated
â”œâ”€ DESCRIPTION: Mark a single notification as read
â”œâ”€ REQUEST BODY: None
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "detail": "ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ¯ ÙƒÙ…Ù‚Ø±ÙˆØ¡ âœ…"
â”‚  }
â””â”€ NOTES: Updates is_read flag to true

---

ğŸ“ ENDPOINT: POST /api/notifications/mark_all_as_read/
â”œâ”€ METHOD: POST
â”œâ”€ PERMISSION: IsAuthenticated
â”œâ”€ DESCRIPTION: Mark all user's unread notifications as read
â”œâ”€ REQUEST BODY: None
â”œâ”€ RESPONSE (200 OK):
â”‚  {
â”‚    "detail": "ØªÙ… ØªØ­Ø¯ÙŠØ¯ 5 Ø±Ø³Ø§Ø¦Ù„ ÙƒÙ…Ù‚Ø±ÙˆØ¡Ø© ğŸ””"
â”‚  }
â”œâ”€ SIDE EFFECTS:
â”‚  - Sets is_read=true for all user's notifications where is_read=false
â””â”€ NOTES: Bulk operation for convenience

================================================================================
                           AUTHENTICATION DETAILS
================================================================================

JWT Token Structure:
â”œâ”€ Type: Bearer tokens (JWT format)
â”œâ”€ Access Token:
â”‚  - Expires: 5 minutes (configurable)
â”‚  - Contains: user_id, email, role
â”‚  - Used for: API requests in Authorization header
â”œâ”€ Refresh Token:
â”‚  - Expires: 24 hours (configurable)
â”‚  - Used for: Obtaining new access token
â”œâ”€ Usage:
â”‚  Authorization: Bearer <access_token>

Token Payload Example:
{
  "aud": null,
  "exp": 1234567890,
  "iat": 1234567800,
  "jti": "abc123...",
  "token_type": "access",
  "user_id": 5,
  "email": "user@example.com",
  "role": "student"
}

================================================================================
                              PERMISSION MATRIX
================================================================================

ENDPOINT                      PERMISSION         NOTES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Register                      AllowAny           Anyone can register
Login                         AllowAny           Anyone can login
Token Refresh                 AllowAny           Anyone can refresh token
Get Current User              IsAuthenticated    Must be logged in

List Courses                  AllowAny           Public endpoint
Create Course                 IsInstructor       Only instructors
Update/Delete Course          IsInstructor       Course creator only
Get Course                    AllowAny           Public endpoint

List Lessons                  AllowAny           Public endpoint
Create Lesson                 IsInstructor       Only instructors
Update/Delete Lesson          IsInstructor       Creator only

List Categories               AllowAny           Read-only for students
Create/Update Categories      IsInstructor       Restricted

List Enrollments              IsInstructor       Instructors only
Create Enrollment             IsInstructor       Instructors only

List Student Progress         IsStudent          Own progress only
Create/Update Progress        IsStudent          Triggers notifications

List Wishlist                 IsStudent          Own wishlist only
Add to Wishlist               IsStudent          Own wishlist only
Remove from Wishlist          IsStudent          Own wishlist only

Dashboard (Student)           IsStudent          Own dashboard
Dashboard (Instructor)        IsInstructor       Own dashboard
Top Students                  IsInstructor       Instructors only

List Exams                    IsAuthenticated    All users can view
Create/Update/Delete Exam     IsInstructor       Only instructors
Submit Exam                   IsStudent          Students only

List Questions                IsAuthenticated    Correct answer hidden
Create Questions              IsInstructor       Only instructors
Update/Delete Questions       IsInstructor       Only instructors

List Attempts                 IsAuthenticated    Students see own only
Get Attempt Detail            IsAuthenticated    Students see own only

List Answers                  IsAuthenticated    Students see own only
Create Answer                 IsStudent          Student answers only

List Certificates             IsAuthenticated    Students see own only
Get Certificate               IsAuthenticated    Students see own only

List Notifications            IsAuthenticated    Own notifications only
Create Notification           IsInstructor       Instructors only
Mark as Read                  IsAuthenticated    Own notifications only
Mark All as Read              IsAuthenticated    Own notifications only

================================================================================
                         ERROR RESPONSE FORMATS
================================================================================

400 Bad Request:
{
  "field_name": ["Error message"],
  "another_field": ["Error message 1", "Error message 2"]
}

401 Unauthorized:
{
  "detail": "Authentication credentials were not provided."
}

403 Forbidden:
{
  "detail": "You do not have permission to perform this action."
}

404 Not Found:
{
  "detail": "Not found."
}

500 Server Error:
{
  "detail": "Internal server error"
}

================================================================================
                            NOTIFICATION TYPES
================================================================================

Type: "success"  - Positive/achievement notifications (lesson completion)
Type: "info"     - Information notifications (general updates)
Type: "warning"  - Warning notifications (deadlines approaching)
Type: "error"    - Error/critical notifications (failed exams)

Automated Notifications:
- Lesson completion at 1, 3, 5, 10 completed lessons
- Exam passed/failed after submission
- Course enrollment confirmations

================================================================================
                         PAGINATION & FILTERS
================================================================================

Pagination:
- Default page size: 20 items per page (configurable)
- Query parameter: ?page=1, ?page=2, etc.
- Response includes: count, next, previous, results

Filters (Example):
- ?search=python (course search by title/description)
- ?type=success (notification type filter)
- ?is_read=false (notification read status)

Ordering:
- Courses: by created_at (newest first)
- Users: by date_joined (newest first)
- Lessons: by order (ascending)
- Notifications: by created_at (newest first)

================================================================================
                         TESTING QUICK REFERENCE
================================================================================

Default Test Users:
- Admin/Instructor: credentials from Django admin
- Student: create via /api/accounts/register/

Test Flow:
1. Register new student: POST /api/accounts/register/
2. Login: POST /api/accounts/login/
3. Get profile: GET /api/accounts/me/
4. List courses: GET /api/courses/courses/
5. Enroll in course: POST /api/courses/enrollments/
6. Track progress: POST /api/courses/progress/
7. Take exam: POST /api/exams/{id}/submit/
8. Get certificate: GET /api/certificates/

Curl Examples:

# Register
curl -X POST http://localhost:8000/api/accounts/register/ \
  -H "Content-Type: application/json" \
  -d '{
    "email": "student@example.com",
    "password": "SecurePass123!",
    "role": "student",
    "phone_number": "+1234567890"
  }'

# Login
curl -X POST http://localhost:8000/api/accounts/login/ \
  -H "Content-Type: application/json" \
  -d '{
    "email": "student@example.com",
    "password": "SecurePass123!"
  }'

# Get current user
curl -X GET http://localhost:8000/api/accounts/me/ \
  -H "Authorization: Bearer <access_token>"

# List courses
curl -X GET http://localhost:8000/api/courses/courses/

# Submit exam
curl -X POST http://localhost:8000/api/exams/1/submit/ \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <access_token>" \
  -d '{
    "answers": [
      {"question": 1, "selected_option": "A"},
      {"question": 2, "selected_option": "B"}
    ]
  }'

================================================================================
                         END OF DOCUMENTATION
================================================================================

Last Updated: 2026-01-05
Project: Teachify Educational Platform
Version: 1.0
Status: Production Ready
